System.register(["jimu-core","jimu-arcgis","esri/geometry/Point","esri/geometry/Polyline","esri/widgets/Sketch","esri/layers/GraphicsLayer","esri/Graphic","esri/core/reactiveUtils","esri/geometry/SpatialReference.js","esri/layers/FeatureLayer.js","esri/views/interactive/snapping/FeatureSnappingLayerSource.js"],(function(e,t){var n={},r={},a={},i={},o={},l={},c={},s={},u={},d={},p={};return{setters:[function(e){n.React=e.React},function(e){r.JimuMapViewComponent=e.JimuMapViewComponent},function(e){a.default=e.default},function(e){i.default=e.default},function(e){o.default=e.default},function(e){l.default=e.default},function(e){c.default=e.default},function(e){s.default=e.default},function(e){u.default=e.default},function(e){d.default=e.default},function(e){p.default=e.default}],execute:function(){e((()=>{var e={423:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(81),a=n.n(r),i=n(645),o=n.n(i)()(a());o.push([e.id,".spinner{width:32px;height:32px;border:8px solid;border-color:#3d5af1 transparent #3d5af1 transparent;border-radius:50%;animation:spin-anim 1.2s linear infinite;display:inline-block}@keyframes spin-anim{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}#pageoverlay{opacity:0.5;visibility:hidden;width:100%;height:100%;z-index:99999;top:0;left:0;position:fixed;cursor:wait;background-color:black;font-size:x-large}#pageoverlay-content{color:white;position:relative;width:50%;top:50%;left:50%;-moz-transform:translateX(-50%) translateY(-50%);-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);text-align:center}#main-widget-ui,#loading-widget-ui{padding:5px}\n",""]);const l=o},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var l=0;l<this.length;l++){var c=this[l][0];null!=c&&(o[c]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&o[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),a&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=a):u[4]="".concat(a)),t.push(u))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},o=[],l=0;l<e.length;l++){var c=e[l],s=r.base?c[0]+r.base:c[0],u=i[s]||0,d="".concat(s," ").concat(u);i[s]=u+1;var p=n(d),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var m=a(f,r);r.byIndex=l,t.splice(l,0,{identifier:d,updater:m,references:1})}o.push(d)}return o}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var i=r(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<i.length;o++){var l=n(i[o]);t[l].references--}for(var c=r(e,a),s=0;s<i.length;s++){var u=n(i[s]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=c}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},129:e=>{"use strict";e.exports=c},135:e=>{"use strict";e.exports=s},294:e=>{"use strict";e.exports=a},920:e=>{"use strict";e.exports=i},693:e=>{"use strict";e.exports=u},49:e=>{"use strict";e.exports=d},231:e=>{"use strict";e.exports=l},43:e=>{"use strict";e.exports=p},560:e=>{"use strict";e.exports=o},826:e=>{"use strict";e.exports=r},891:e=>{"use strict";e.exports=n}},t={};function f(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={id:n,exports:{}};return e[n](a,a.exports,f),a.exports}f.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return f.d(t,{a:t}),t},f.d=(e,t)=>{for(var n in t)f.o(t,n)&&!f.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},f.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),f.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.p="",f.nc=void 0;var m={};return f.p=window.jimuConfig.baseUrl,(()=>{"use strict";f.r(m),f.d(m,{__set_webpack_public_path__:()=>O,default:()=>j,drawPoint:()=>_,drawPoly:()=>k});var e=f(891),t=f(826),n=f(294),r=f(920),a=f(560),i=f(231),o=f(129),l=f(135),c=f(693),s=f(49),u=f(43),d=f(379),p=f.n(d),y=f(795),v=f.n(y),g=f(569),h=f.n(g),b=f(565),w=f.n(b),E=f(216),x=f.n(E),R=f(589),S=f.n(R),M=f(423),C={};C.styleTagTransform=S(),C.setAttributes=w(),C.insert=h().bind(null,"head"),C.domAPI=v(),C.insertStyleElement=x(),p()(M.Z,C),M.Z&&M.Z.locals&&M.Z.locals;var I=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function l(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}c((r=r.apply(e,t||[])).next())}))};const{useState:T}=e.React;let L=null;function k(e){let t=[],n=[];for(let t of e.values())n.push([t.m_dX,t.m_dY]);t.push(n);let a=new r.default({paths:t,spatialReference:c.default.WGS84});L.layer.add(new o.default({geometry:a,attributes:{aaron:!0}})),requestAnimationFrame((()=>{}))}function _(e,t){L.layer.add(new o.default({geometry:new n.default({x:e,y:t,spatialReference:c.default.WGS84}),attributes:{aaron:!0}})),requestAnimationFrame((()=>{}))}const j=n=>{var r;const[o,c]=T(),[d,p]=T(),[f,m]=T(),[y,v]=T(),[g,h]=T(),[b,w]=T(""),[E,x]=T(""),[R,S]=T(""),[M,C]=T("");function k(e){return I(this,void 0,void 0,(function*(){C(e)}))}return e.React.createElement("div",{className:"widget-starter jimu-widget"},n.useMapWidgetIds&&1===n.useMapWidgetIds.length&&e.React.createElement(t.JimuMapViewComponent,{useMapWidgetId:null===(r=n.useMapWidgetIds)||void 0===r?void 0:r[0],onActiveViewChange:e=>{if(e){c(e);let n=new i.default({title:"Sketch Widget",id:"mySketch"});e.view.map.add(n),m(n);let r=new a.default({layer:n,view:e.view,creationMode:"single",snappingOptions:{enabled:!0,featureEnabled:!0},visible:!1});r.visibleElements={createTools:{circle:!1,polyline:!1,rectangle:!1},duplicateButton:!1,selectionTools:{"rectangle-selection":!1,"lasso-selection":!1},settingsMenu:!1},r.on("create",t),r.on("update",t),p(r),L=r,l.default.whenOnce((()=>!e.view.updating)).then((()=>I(void 0,void 0,void 0,(function*(){let t='<option value="nothing_selected"></option>';for(let n of e.view.allLayerViews){if("World Hillshade"===n.layer.title||"World Topographic Map"===n.layer.title||"Sketch Widget"===n.layer.title)continue;t+=`<option value=${n.layer.id}>${n.layer.title}</option>`;const a=yield e.view.whenLayerView(e.view.map.findLayerById(n.layer.id));r.snappingOptions.featureSources.add(new u.default({layer:a.layer,enabled:!0}))}document.getElementById("select-address").innerHTML=t,document.getElementById("select-road").innerHTML=t,document.getElementById("select-output").innerHTML=t,document.getElementById("loading-widget-ui").remove(),document.getElementById("main-widget-ui").style.visibility="visible"}))))}function t(e){return I(this,void 0,void 0,(function*(){"complete"===e.state&&("polygon"===e.tool?v(e.graphic.geometry):"point"===e.tool?h(e.graphic.geometry):"move"!==e.tool&&"transform"!==e.tool&&"reshape"!==e.tool||("point"===e.graphics[0].geometry.type?h(e.graphics[0].geometry):"polygon"===e.graphics[0].geometry.type&&v(e.graphics[0].geometry)))}))}}}),e.React.createElement("div",{id:"pageoverlay"},e.React.createElement("p",{id:"pageoverlay-content"},M)),e.React.createElement("div",{id:"loading-widget-ui"},"Loading widget... ",e.React.createElement("div",{className:"spinner"})),e.React.createElement("div",{style:"padding: 5px;",id:"main-widget-ui",style:{visibility:"hidden"}},e.React.createElement("label",null,"Select Address Layer",e.React.createElement("br",null),e.React.createElement("select",{id:"select-address",value:b,onChange:e=>w(e.target.value)})),e.React.createElement("label",null,"Select Road Layer",e.React.createElement("br",null),e.React.createElement("select",{id:"select-road",value:E,onChange:e=>x(e.target.value)})),e.React.createElement("br",null),e.React.createElement("label",null,"Select Output Layer",e.React.createElement("br",null),e.React.createElement("select",{id:"select-output",value:R,onChange:e=>S(e.target.value)})),e.React.createElement("br",null),e.React.createElement("button",{onClick:function(){if(null!=g){let e=null;for(let t of d.layer.graphics)"point"===t.geometry.type&&(e=t);null!==e&&d.layer.remove(e),h(null)}d.create("point")}},"Draw Point")," ",e.React.createElement("button",{onClick:function(){if(null!=y){let e=null;for(let t of d.layer.graphics)"polygon"===t.geometry.type&&(e=t);null!==e&&d.layer.remove(e),v(null)}d.create("polygon")}},"Draw Area"),e.React.createElement("br",null),e.React.createElement("br",null),e.React.createElement("button",{onClick:function(){return I(this,void 0,void 0,(function*(){const e=yield o.view.whenLayerView(o.view.map.findLayerById(R));let t=new s.default({url:e.layer.url});yield l.default.whenOnce((()=>!e.updating));let n={deleteFeatures:(yield t.queryFeatures()).features};t.applyEdits(n);let r=[];for(let e of d.layer.graphics)null!==e.attributes&&e.attributes.aaron&&r.push(e);d.layer.removeMany(r)}))}},"Clear Output")," ",e.React.createElement("button",{onClick:function(){return I(this,void 0,void 0,(function*(){yield o.view.goTo([y,g]),document.getElementById("pageoverlay").style.visibility="visible";try{k("starting tool"),setTimeout((()=>document.getElementById("pageoverlay").style.visibility="hidden"),1500)}catch(e){k(e),setTimeout((()=>document.getElementById("pageoverlay").style.visibility="hidden"),5e3)}}))}},"Execute")))};function O(e){f.p=e}})(),m})())}}}));